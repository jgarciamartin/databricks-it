bundle:
  name: databricks-it

targets:
  dev:
    default: true
    workspace:
      host: ${DATABRICKS_HOST}
      root_path: /Workspace/Shared/.bundle/${bundle.name}/${bundle.target}

resources:
  jobs:
    cloudutils_integration_tests:
      name: cloudutils-integration-tests

      environments:
        - environment_key: default
          spec:
            # Serverless environment version (reciente)
            environment_version: "4"
            dependencies:
              - "./artifacts/cloudutils.whl"
              - "pytest"

      tasks:
        - task_key: integration_tests
          spark_python_task:
            python_file: src/cloudutils/run_integration_tests.py
          environment_key: default
